**事务的基本操作**

+ 开启事务

```
multi #设定事务的开启位置，此指令执行后，后续的所有指令均加入到事务中
```

+ 执行事务

```
exec #设定事务的结束位置，同时执行事务。与multi成对出现，成对使用，注意：加入事务的命令暂时进入到任务队列中，并没有立即执行，只有执行exec命令才开始执行
```

+ 取消事务

```
discard #终止当前事务的定义，发生在multi之后，exec之前
```

![image-20200820214157335](img\image-20200820214157335.png)

**事务的工作流程**

![image-20200820214410017](img\image-20200820214410017.png)

**事务的注意事项**

+ 如果定义的事务中所包含的命令存在语法错误，整体事务中所有命令均不会执行。包括那些语法正确的命令。
+ 指命令格式正确，但是无法正确的执行。例如对string进行lpush操作，已经执行完毕的命令对应的数据不会自动回滚，需要程序员自己在代码中实现回滚。

![image-20200820214555866](img\image-20200820214555866.png)


